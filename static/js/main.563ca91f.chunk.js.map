{"version":3,"sources":["components/store/index.js","components/store/reducer.js","components/authentication/authentication.js","components/web-socket-client/index.js","components/call/call.js","components/call-respond/call-respond.js","components/connected/connected.js","components/app.js","index.js","components/call-respond/call-respond.module.css","components/call/call.module.css","components/connected/connected.module.css"],"names":["createStore","state","type","payload","socket","user","name","users","filter","socket_id","calling","incoming_call","RTC","RTCPeerConnection","iceServers","calling_status","calling_profile","client","call_back","RTCSessionDescriptionInit","React","memo","props","useSelector","Socket","dispatch","useDispatch","Fragment","children","onChange","e","target","value","onClick","console","log","newSocket","url","WebSocket","on","action","signal","onmessage","event","data","JSON","parse","CustomEvent","detail","window","dispatchEvent","err","addEventListener","listener","removeEventListener","send","callbackFunction","callback","stringify","onConnect","onopen","onClose","onclose","onError","onerror","webSocket","rtc","useEffect","createOffer","offerToReceiveAudio","offerToReceiveVideo","then","sdp","setLocalDescription","args","setRemoteDescription","RTCSessionDescription","addIceCandidate","RTCIceCandidate","IceCandidate","catch","error","currentTarget","connectionState","className","styles","calling_modal","calling_info","calling_info_name","calling_end","calling_accept","createAnswer","candidate","calling_decline","video","useRef","from","stream","streams","current","srcObject","muted","navigator","mediaDevices","getUserMedia","audio","width","height","getTracks","track","addTrack","alert","connected","ref","autoPlay","playsInline","user_list","map","key","App","store","rootElement","document","getElementById","ReactDOM","render","module","exports"],"mappings":"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","file":"static/js/main.563ca91f.chunk.js","sourcesContent":["import { createStore } from \"redux\";\nimport reducer from \"./reducer\"\n\nexport default createStore(reducer, {\n    RTC: new RTCPeerConnection({ iceServers: [{ \"urls\": \"stun:stun.l.google.com:19302\" }] }),\n    calling: { calling_status: false, calling_profile: { name: '' } },\n    incoming_call: {\n        incoming_call: false,\n        name: '', // sender user name\n        client: '', // receive socket id\n        call_back: '', // custom callback url\n        RTCSessionDescriptionInit: '' // the Session Description \n    },\n    socket: null,\n    user: { name: 'Masud Alam', socket_id: null },\n    users: [\n        { name: 'Siam Mridha', socket_id: 'fdsfsdfsdfsdfsd' },\n        { name: 'Kawser Kham', socket_id: 'fdsfsdfsadsdfsdfsd' },\n        { name: 'Masud Alam', socket_id: 'fdsfsdfdsafsdfsdfsd' }\n    ]\n})","export default (state, { type, payload }) => {\n  switch (type) {\n    case \"CREATE-SOCKET-CONNECTION\":\n      return { ...state, socket: payload };\n    case \"UPDATE-USER-NAME\":\n      return { ...state, user: { ...state.user, name: payload } };\n    case \"SET-USERS\":\n      return { ...state, users: payload }\n    case \"ADD-USER\":\n      return { ...state, users: [...state.users, payload] };\n    case \"DELETE-USER\":\n      return { ...state, users: state.users.filter((user) => user.socket_id === payload) }\n    case \"CALLING\":\n      return { ...state, calling: { ...state.calling, ...payload } }\n    case \"CALL-END\":\n      return { ...state, calling: { ...state.calling, ...payload } }\n    case \"INCOMING-CALL\":\n      return { ...state, incoming_call: { ...state.incoming_call, ...payload } }\n    default:\n      return state;\n  }\n};\n","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\"\nimport webSocket from '../web-socket-client'\n\nconst Authentication = (props) => {\n    const name = useSelector(state => state.user.name)\n    const Socket = useSelector(state => state.socket)\n    const dispatch = useDispatch()\n    const handelConnect = () => {\n        if (name) {\n            console.log(name)\n            const newSocket = webSocket(`wss://6d6qoei593.execute-api.us-east-2.amazonaws.com/Prod/?name=${name}`)\n            newSocket.onConnect((e) => {\n                console.log('onConnect ', e)\n                dispatch({ type: \"CREATE-SOCKET-CONNECTION\", payload: newSocket })\n            })\n        }\n    }\n    const handleChange = (e) => {\n        dispatch({\n            type: \"UPDATE-USER-NAME\",\n            payload: e.target.value\n        })\n    }\n    return (\n        <React.Fragment>\n            {Socket ? props.children :\n                < div >\n                    <div>Enter Your Name</div>\n                    <input onChange={handleChange} value={name} />\n                    <button onClick={handelConnect}>Connect</button>\n                </div>\n            }\n        </React.Fragment >\n    );\n};\n\nexport default React.memo(Authentication)\n","export default (url) => {\n    let socket = new WebSocket(url)\n\n    const onConnect = (call_back) => {\n        socket.onopen = (event) => {\n            call_back(event)\n        }\n    }\n\n    const onError = (call_back) => {\n        socket.onerror = (event) => {\n            call_back(event)\n        }\n    }\n\n    const onClose = (call_back) => {\n        socket.onclose = (event) => {\n            call_back(event)\n        }\n    }\n\n    const on = (action, call_back, signal) => {\n        const listener = (e) => {\n            const { data, event } = e.detail\n            call_back(data, event)\n            if (signal) {\n                window.removeEventListener(action, listener)\n            }\n        }\n\n        socket.onmessage = (event) => {\n            // console.log(event)\n            try {\n                const data = JSON.parse(event.data)\n                if (call_back && data.action) {\n                    const e = new CustomEvent(data.action, { detail: { data: data.data, event } })\n                    window.dispatchEvent(e)\n                }\n            } catch (err) {\n\n            }\n        }\n\n        window.addEventListener(action, listener)\n    }\n\n    const send = (action, data, callbackFunction) => {\n        const callback = `${data && data.call_back ? data.call_back : `${action}callback`}`\n        data = {\n            ...data,\n            call_back: callback\n        }\n        socket.send(JSON.stringify({ action, data }))\n        if (callbackFunction) {\n            on(callback, callbackFunction, true)\n        }\n    }\n\n    return { on, send, onConnect, onClose, onError }\n}","import React, { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\"\nimport styles from './call.module.css'\n\nconst Call = () => {\n    const user = useSelector(state => state.user)\n    const { calling_profile } = useSelector(state => state.calling)\n    const rtc = useSelector(state => state.RTC)\n    const dispatch = useDispatch()\n    const Socket = useSelector(state => state.socket)\n\n    useEffect(() => {\n        rtc.createOffer({ offerToReceiveAudio: 1, offerToReceiveVideo: 1 })\n            .then((sdp) => {\n                // set answer sdp as local description\n                rtc.setLocalDescription(sdp)\n                // console.log(JSON.stringify(sdp))\n                const data = {\n                    name: user.name, // sender user name\n                    client: calling_profile.socket_id, // receive socket id\n                    call_back: `call-answer${calling_profile.socket_id}`, // custom callback url\n                    RTCSessionDescriptionInit: sdp, // the Session Description\n                }\n                Socket.send('call', data, (args) => {\n                    rtc.setRemoteDescription(new RTCSessionDescription(args.RTCSessionDescriptionInit))\n                        .then(() => {\n                            rtc.addIceCandidate(new RTCIceCandidate(args.IceCandidate))\n                                .catch((error) => {\n                                    console.log('addCandidate', error)\n                                })\n                        })\n                        .catch((error) => {\n                            console.log('setRemoteDescription', error)\n                        })\n                    // console.log('call-answer ', args)\n                })\n            }).catch((error) => {\n                console.log('createOffer', error)\n            })\n\n        rtc.addEventListener('connectionstatechange', (e) => {\n            if (e.currentTarget.connectionState === \"connected\") {\n                console.log('connected')\n                dispatch({ type: \"CALL-END\", payload: { calling_status: false, calling_profile: null } })\n            }\n        })\n    })\n\n    const callEnd = () => {\n        dispatch({ type: \"CALL-END\", payload: { calling_status: false, calling_profile: null } })\n    }\n\n    return (\n        <div className={styles.calling_modal}>\n            <div className={styles.calling_info}>\n                <p className={styles.calling_info_name}>{calling_profile.name}</p>\n                Connecting...\n            </div>\n            <button className={styles.calling_end} onClick={callEnd}>End</button>\n        </div>\n    );\n};\n\nexport default React.memo(Call)\n","import React from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\"\nimport styles from './call-respond.module.css'\n\nconst CallRespond = (props) => {\n    const rtc = useSelector(state => state.RTC)\n    const { name, client, call_back, RTCSessionDescriptionInit } = useSelector(state => state.incoming_call)\n    const Socket = useSelector(state => state.socket)\n    const dispatch = useDispatch()\n\n    const callAccept = () => {\n        // retrieve and parse the SDP copied from the remote peer\n        // set sdp as remote description\n        rtc.setRemoteDescription(new RTCSessionDescription(RTCSessionDescriptionInit))\n            .then(() => {\n                rtc.createAnswer({ offerToReceiveAudio: 1, offerToReceiveVideo: 1 })\n                    .then((sdp) => {\n                        // set answer sdp as local description\n                        rtc.setLocalDescription(sdp)\n                        // console.log(JSON.stringify(sdp))\n                        rtc.addEventListener('icecandidate', (e) => {\n                            if (e.candidate) {\n                                Socket.send(call_back, {\n                                    client, // receive socket id\n                                    RTCSessionDescriptionInit: sdp, // the Session Description \n                                    IceCandidate: e.candidate,\n                                })\n                                // console.log('ICE Candidate:', JSON.stringify(e.candidate))\n                            }\n                        })\n\n                    }).catch((error) => {\n                        console.log('createAnswer', error)\n                    })\n            }).catch((error) => {\n                console.log('setRemoteDescription', error)\n            })\n        rtc.addEventListener('connectionstatechange', (e) => {\n            if (e.currentTarget.connectionState === \"connected\") {\n                console.log('connected')\n                dispatch({ type: \"INCOMING-CALL\", payload: { incoming_call: false } })\n            }\n        })\n    }\n\n    const callDecline = () => {\n        dispatch({ type: \"INCOMING-CALL\", payload: { incoming_call: false } })\n    }\n\n    return (\n        <div className={styles.calling_modal}>\n            <div className={styles.calling_info}>\n                <p className={styles.calling_info_name}>{name}</p>\n                Incoming Calling...\n            </div>\n            <button className={styles.calling_accept} onClick={callAccept}>Accept</button>\n            <button className={styles.calling_decline} onClick={callDecline}>Decline</button>\n        </div>\n    );\n};\n\nexport default React.memo(CallRespond)\n","import React, { useRef, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\"\nimport styles from './connected.module.css'\nimport Call from '../call/call'\nimport CallRespond from '../call-respond/call-respond'\n\nconst Connected = () => {\n    const video = useRef(null)\n    const { calling_status } = useSelector(state => state.calling)\n    const { incoming_call } = useSelector(state => state.incoming_call)\n    const rtc = useSelector(state => state.RTC)\n    const users = useSelector(state => state.users)\n    const Socket = useSelector(state => state.socket)\n    const dispatch = useDispatch()\n\n    useEffect(() => {\n        Socket.onError((event) => {\n            console.log('onError ', event)\n        })\n        Socket.send('get-users', null, (event) => {\n            dispatch({ type: \"SET-USERS\", payload: event.users })\n        })\n        Socket.on('user-connected', ({ name, from }) => {\n            dispatch({ type: \"ADD-USER\", payload: { socket_id: from, name } })\n        })\n        Socket.on('user-disconnected', ({ from }) => {\n            dispatch({ type: \"DELETE-USER\", payload: from })\n        })\n        Socket.on('call', (args) => {\n            dispatch({ type: \"INCOMING-CALL\", payload: { incoming_call: true, ...args } })\n        })\n        rtc.addEventListener('track', ({ streams: [stream] }) => {\n            console.log('streams:', stream)\n            video.current.srcObject = stream\n            video.current.muted = false\n        })\n        // rtc.addEventListener('iceconnectionstatechange', (e) => {\n        //     console.log('IC Connection State Change:', e)\n        // })\n        rtc.addEventListener('icecandidateerror', (e) => {\n            console.log('IC Candidate Error:', e)\n        })\n\n        navigator.mediaDevices.getUserMedia({ audio: true, video: { width: 3840, height: 2160 } })\n            .then((stream) => {\n                video.current.srcObject = stream\n                for (const track of stream.getTracks()) {\n                    rtc.addTrack(track, stream)\n                }\n            }).catch((error) => {\n                alert(`getUserMedia() error: ${error}`)\n            })\n    }, [Socket, dispatch, rtc])\n\n    const call = (client) => {\n        dispatch({ type: \"CALLING\", payload: { calling_status: true, calling_profile: client } })\n    }\n\n    return (\n        <div className={styles.connected}>\n            <video className={styles.video} ref={video} autoPlay muted playsInline />\n            <div className={styles.user_list}>\n                {users.map((user) =>\n                    <button key={user.socket_id} onClick={() => call(user)}>\n                        Call {user.name}\n                    </button>\n                )}\n            </div>\n            {calling_status && <Call />}\n            {incoming_call && <CallRespond />}\n        </div>\n    );\n};\n\nexport default React.memo(Connected)\n","import React from \"react\";\nimport { Provider } from \"react-redux\";\nimport store from \"./store\";\nimport Authentication from './authentication/authentication'\nimport Connected from './connected/connected'\n\n\nconst App = () => {\n    return (\n        <Provider store={store}>\n            <Authentication >\n                <Connected />\n            </Authentication>\n        </Provider>\n    )\n}\n\nexport default App\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport \"./index.css\"\nimport App from './components/app'\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(<App />, rootElement);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"calling_modal\":\"call-respond_calling_modal__2-Um5\",\"calling_info\":\"call-respond_calling_info__3AiDw\",\"calling_info_name\":\"call-respond_calling_info_name__2AcYm\",\"calling_accept\":\"call-respond_calling_accept__1KCtJ\",\"calling_decline\":\"call-respond_calling_decline__29uPU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"calling_modal\":\"call_calling_modal__2mgzD\",\"calling_info\":\"call_calling_info__3WoZA\",\"calling_info_name\":\"call_calling_info_name__4iY9T\",\"calling_end\":\"call_calling_end__3nvRh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"connected\":\"connected_connected__3IFXd\",\"video\":\"connected_video__2HNgJ\",\"user_list\":\"connected_user_list__2qh8p\"};"],"sourceRoot":""}